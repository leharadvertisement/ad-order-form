@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: Arial, sans-serif;
}

@layer base {
  :root {
    --background: 0 0% 100%; /* White */
    --foreground: 0 0% 3.9%; /* Near Black */

    --card: 0 0% 100%; /* White */
    --card-foreground: 0 0% 3.9%;

    --popover: 0 0% 100%; /* White */
    --popover-foreground: 0 0% 3.9%;

    --primary: 210 100% 50%; /* Blue #007BFF */
    --primary-foreground: 0 0% 100%; /* White */

    --secondary: 0 0% 94.1%; /* Light Gray #f0f0f0 */
    --secondary-foreground: 0 0% 9%; /* Dark text for Secondary */

    --muted: 0 0% 94.1%; /* Light Gray #f0f0f0 */
    --muted-foreground: 0 0% 45.1%; /* Default Muted Text */

    --accent: 210 100% 90%; /* Lighter Blue for Hover/Focus */
    --accent-foreground: 210 100% 30%; /* Darker Blue Text on Accent */

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 80%; /* Default border light gray */
    --input: 0 0% 80%; /* Default input border light gray */
    --ring: 210 100% 50%; /* Blue focus ring */

    --radius: 0.3rem; /* Slightly smaller radius */

    /* Chart colors (keeping defaults) */
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    /* Sidebar colors (keeping defaults) */
     --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    /* Define dark theme variables if needed, otherwise defaults will be used */
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;

    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;

    --primary: 210 100% 50%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 14.9%; /* Dark Gray */
    --secondary-foreground: 0 0% 98%; /* White text for Secondary */

    --muted: 0 0% 14.9%; /* Dark Gray */
    --muted-foreground: 0 0% 63.9%;

    --accent: 210 100% 20%; /* Darker Blue */
    --accent-foreground: 0 0% 98%; /* White text on Accent */

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 210 100% 50%;

    /* Chart colors (keeping defaults for dark) */
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;

     /* Sidebar colors (keeping defaults for dark) */
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  /* Default border style - removed */
  /* * {
    @apply border-border;
  } */
  body {
    @apply bg-background text-foreground font-bold; /* Ensure bold is applied by default */
  }

   /* Underline styles */
   .underline-black {
      @apply border-b border-black inline-block pb-px; /* Thinner underline */
   }
   .note-title-underline, .billing-title-underline {
      @apply border-b border-black inline-block pb-px mb-1; /* Adjusted margin, thinner */
   }
} /* End @layer base */


/* General Print Styles */
@media print {
  body {
    margin: 0;
    padding: 0;
    -webkit-print-color-adjust: exact !important; /* Chrome, Safari, Edge */
    print-color-adjust: exact !important; /* Firefox */
    font-weight: bold !important; /* Ensure bold is applied */
    font-size: 9pt; /* Smaller base font for print */
  }

  .no-print,
  .popover,
  .popover-content, /* Ensure popovers are hidden */
  button:not(.print-visible-button):not(#closePreviewButton) /* Hide most buttons, allow close btn in preview */
  {
    display: none !important;
    visibility: hidden !important;
  }

  /* Styles specifically for the printable area */
  #printable-area {
    width: 100% !important; /* Take full width of parent */
    max-width: 100% !important;
    margin: 0 !important;
    padding: 10pt !important; /* Reduced padding */
    border: 2pt solid black !important; /* Ensure border prints */
    box-shadow: none !important; /* Remove shadows for print */
    page-break-inside: avoid; /* Try to keep card content together */
    font-weight: bold !important; /* Ensure bold is applied within */
    box-sizing: border-box !important;
  }

  #printable-area * {
     font-weight: bold !important; /* Force bold on all children */
     color: black !important; /* Ensure text is black */
     border-color: black !important; /* Ensure borders are black */
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      line-height: 1.2; /* Tighter line spacing */
  }

  /* Ensure correct CardContent padding handling in print */
  #printable-area .card-content-print-fix {
      padding: 0 !important;
  }
   /* Target direct children of the corrected CardContent for margin */
  #printable-area .card-content-print-fix > * {
       margin-bottom: 8pt !important; /* Reduce space between sections */
   }

  /* Explicit margins for bottom-most elements if needed */
   #printable-area .header-title {
       margin-bottom: 8pt !important;
   }
   #printable-area .address-container {
      margin-bottom: 8pt !important;
   }
   #printable-area .advertisement-manager-section {
       margin-bottom: 8pt !important;
   }
   #printable-area .heading-package-container {
        margin-bottom: 8pt !important;
   }
   #printable-area .table-container-print {
       margin-bottom: 8pt !important;
   }
   #printable-area .matter-box {
       margin-bottom: 8pt !important;
   }
    #printable-area .billing-address-box {
       margin-bottom: 8pt !important;
   }
   #printable-area .notes-stamp-container {
       margin-bottom: 0 !important; /* No margin at the very bottom */
   }


  /* Ensure specific elements intended for print are visible */
  .print-only-inline-block {
    display: inline-block !important;
    visibility: visible !important;
  }
  .print-only-flex {
     display: flex !important;
     visibility: visible !important;
  }

  /* Adjust borders for print */
  .print-border, .print-border-heavy {
     border: 1pt solid black !important;
  }
  .print-border-heavy {
     border-width: 2pt !important;
  }
  .print-border-thin {
    border: 0.5pt solid black !important; /* Thinner border for table cells */
  }

  /* Input and Textarea appearance for print */
  input[type="text"],
  textarea {
    border-bottom: 0.5pt solid black !important; /* Thinner underline */
    border-top: none !important;
    border-left: none !important;
    border-right: none !important;
    border-radius: 0 !important;
    padding: 0 !important; /* Minimal padding */
    margin: 0 !important;
    background-color: transparent !important; /* No background */
    box-shadow: none !important;
     font-weight: bold !important;
     color: black !important;
     -webkit-print-color-adjust: exact !important;
     print-color-adjust: exact !important;
     /* Ensure text wraps and is visible */
     white-space: pre-wrap !important;
     overflow-wrap: break-word !important;
     height: auto !important; /* Allow height to adjust */
     min-height: 1.1em; /* Minimum height for visibility */
     font-size: 9pt !important; /* Match body font size */
  }

  /* Table specific styles for print */
  .table-container-print {
     page-break-inside: auto; /* Allow table to break across pages if needed */
  }
  .print-table {
     width: 100% !important;
     border-collapse: collapse !important;
     border: 1pt solid black !important;
     font-weight: bold !important;
  }
  .print-table-header {
    background-color: #f0f0f0 !important; /* Use hex for better print consistency */
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  .print-table th, .print-table td {
     border: 0.5pt solid black !important; /* Use thin border */
     padding: 2pt !important; /* Minimal padding */
     vertical-align: top !important; /* Align text top */
     font-weight: bold !important;
     color: black !important;
     font-size: 8pt !important; /* Smaller font in table */
     -webkit-print-color-adjust: exact !important;
     print-color-adjust: exact !important;
     page-break-inside: avoid; /* Try to keep cell content together */
  }
  .print-table-cell textarea { /* Style textareas within table cells */
     min-height: 100px !important; /* Match original height */
     height: auto !important; /* Allow shrinking */
     border: none !important;
     padding: 1pt !important;
     font-weight: bold !important;
     color: black !important;
     font-size: 8pt !important;
     -webkit-print-color-adjust: exact !important;
     print-color-adjust: exact !important;
     white-space: pre-wrap !important;
     overflow-wrap: break-word !important;
     display: block; /* Ensure it behaves like a block */
     overflow: hidden; /* Hide overflow */
     line-height: 1.1; /* Tighter line height in cells */
  }
   .print-table tr {
       height: auto !important; /* Let content determine height */
       min-height: 100px !important; /* Keep minimum height */
       page-break-inside: avoid; /* Try to keep rows on one page */
   }


  /* Matter box vertical text for print */
   .vertical-label {
     background-color: black !important; /* Ensure background prints */
     -webkit-print-color-adjust: exact !important;
     print-color-adjust: exact !important;
     width: 6pt !important; /* Thinner label */
     padding: 2pt !important;
     font-size: 10pt !important; /* Smaller font */
     display: flex !important; /* Ensure flex works for alignment */
     align-items: center !important;
     justify-content: center !important;
   }
  .matter-text-print {
    writing-mode: vertical-rl !important;
    text-orientation: mixed !important;
    transform: rotate(180deg) !important;
    font-weight: bold !important;
    color: white !important; /* Ensure it's white on black bg */
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    background-color: transparent !important; /* Text itself has no background */
    white-space: nowrap !important; /* Prevent wrapping */
    display: block !important; /* Ensure it takes space */
  }
   .matter-box {
       height: 100px !important; /* Match original height */
   }
  .matter-content textarea {
     font-weight: bold !important;
     color: black !important;
     -webkit-print-color-adjust: exact !important;
     print-color-adjust: exact !important;
     white-space: pre-wrap !important;
     overflow-wrap: break-word !important;
     font-size: 9pt !important;
     border: none !important; /* No border on textarea itself */
     padding: 1pt !important; /* Minimal padding inside */
  }

  /* Stamp image for print */
  .stamp-container-print {
    display: flex !important; /* Ensure it's visible */
    visibility: visible !important;
    position: absolute !important; /* Ensure positioning */
    top: 2pt !important;
    right: 2pt !important;
    width: 100px !important; /* Match original size */
    height: 80px !important; /* Match original size */
    border: none !important; /* No border around the container itself */
    overflow: hidden; /* Ensure image stays within bounds */
    align-items: center !important; /* Vertically center */
    justify-content: center !important; /* Horizontally center */
  }
   .stamp-print-image {
       max-width: 100% !important;
       max-height: 100% !important;
       object-fit: contain !important;
       display: block !important;
   }

   /* Notes container - ensure border is visible */
   .notes-stamp-container {
       border: 1pt solid black !important;
       position: relative !important; /* Needed for absolute positioning of stamp */
       min-height: 90px !important; /* Ensure min height accommodates smaller stamp */
       padding-right: 110px !important; /* Space for smaller stamp */
       padding-top: 2pt !important; /* Minimal padding */
       padding-bottom: 2pt !important;
       padding-left: 4pt !important;
   }
    .notes-stamp-container ol {
       font-size: 8pt !important; /* Smaller font for notes */
       margin-top: 4pt !important;
       padding-left: 15px !important; /* Adjust list indent */
    }

  /* Ensure underlines print correctly */
  .note-title-underline, .billing-title-underline {
     border-bottom: 1pt solid black !important; /* Thinner underline */
     padding-bottom: 0px !important;
     margin-bottom: 2pt !important;
     display: inline-block !important; /* Ensure it behaves correctly */
     border-color: black !important; /* Explicitly set black color */
  }

  /* Address box specific styles */
  .address-box p, .billing-address-box p {
     font-weight: bold !important;
     color: black !important;
     line-height: 1.1 !important; /* Tighter line height */
     font-size: 8pt !important; /* Smaller font */
  }
   .address-container .address-box, .address-container .ro-date-client-container {
      padding: 4pt !important; /* Reduced padding */
   }

  /* RO/Date/Client Box specific */
  .ro-date-client-container .field-row label {
     font-weight: bold !important;
     color: black !important;
     font-size: 9pt !important;
     width: auto !important; /* Allow label to shrink */
     margin-right: 4pt !important;
     flex-shrink: 1 !important;
  }
  .ro-date-client-container input {
      font-weight: bold !important;
      color: black !important;
      border-bottom: 0.5pt solid black !important;
      font-size: 9pt !important;
  }
   #orderDateDisplay {
      display: inline !important; /* Ensure date is visible */
      font-weight: bold !important;
      color: black !important;
      font-size: 9pt !important;
      margin-left: 0 !important;
      padding-left: 2pt !important;
   }

  /* Header title */
  .header-title {
      background-color: black !important;
      color: white !important;
      font-weight: bold !important;
      padding: 2pt !important;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
  }
  .header-title h1 {
       font-size: 14pt !important; /* Adjust size if needed */
       margin: 0 !important;
       font-weight: bold !important;
       color: white !important;
       -webkit-print-color-adjust: exact !important;
       print-color-adjust: exact !important;
  }
}

/* Styles for PDF Generation via html2canvas */
.pdf-generation-mode {
  /* Apply base print styles - manually list needed styles */
  /* Use @apply for Tailwind classes */
  @apply p-0 m-0 box-border;

  body { @apply m-0 p-0 font-bold text-[9pt]; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .no-print, .popover, .popover-content, button:not(.print-visible-button) { @apply hidden invisible; }
  #printable-area { @apply w-full max-w-full m-0 p-[10pt] border-[2pt] border-black shadow-none box-border; page-break-inside: avoid; font-weight: bold !important; }
  #printable-area * { @apply font-bold text-black border-black; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; line-height: 1.2; }
   /* Fix for CardContent padding in PDF mode - adjusted selector */
  #printable-area .card-content-pdf-fix { @apply p-0 !important; }
  #printable-area .card-content-pdf-fix > * { @apply mb-[8pt]; }

  #printable-area .header-title { @apply mb-[8pt]; }
   #printable-area .address-container { @apply mb-[8pt]; }
   #printable-area .advertisement-manager-section { @apply mb-[8pt]; }
   #printable-area .heading-package-container { @apply mb-[8pt]; }
   #printable-area .table-container-print { @apply mb-[8pt]; }
   #printable-area .matter-box { @apply mb-[8pt]; }
   #printable-area .billing-address-box { @apply mb-[8pt]; }
   #printable-area .notes-stamp-container { @apply mb-0; }

  .print-only-inline-block, .pdf-only-inline-block { @apply inline-block visible; }
  .print-only-flex, .pdf-only-flex { @apply flex visible; }
  .print-border, .print-border-heavy { border: 1pt solid black !important; }
  .print-border-heavy { border-width: 2pt !important; }
  .print-border-thin { border: 0.5pt solid black !important; }
  input[type="text"], textarea { @apply border-b-[0.5pt] border-black border-t-0 border-l-0 border-r-0 rounded-none p-0 m-0 bg-transparent shadow-none font-bold text-black text-[9pt]; white-space: pre-wrap !important; overflow-wrap: break-word !important; height: auto !important; min-height: 1.1em; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .table-container-print { page-break-inside: auto; }
  .print-table { @apply w-full border-collapse border border-black font-bold; }
  .print-table-header { background-color: #f0f0f0 !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .print-table th, .print-table td { @apply border-black p-[2pt] align-top font-bold text-black text-[8pt]; border-width: 0.5pt !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; page-break-inside: avoid; }
  .print-table-cell textarea { @apply min-h-[100px] h-auto border-none p-[1pt] font-bold text-black text-[8pt] block overflow-hidden; white-space: pre-wrap !important; overflow-wrap: break-word !important; line-height: 1.1; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .print-table tr { @apply h-auto min-h-[100px]; page-break-inside: avoid; }
  .vertical-label { background-color: black !important; @apply p-[2pt] text-[10pt] w-[6pt] flex items-center justify-center; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .matter-text-print { writing-mode: vertical-rl !important; text-orientation: mixed !important; transform: rotate(180deg) !important; @apply font-bold text-white bg-transparent whitespace-nowrap block; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }

  .matter-box { height: 100px !important; }
  .matter-content textarea { @apply font-bold text-black text-[9pt] border-none p-[1pt]; white-space: pre-wrap !important; overflow-wrap: break-word !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .stamp-container-print { @apply flex visible absolute top-[2pt] right-[2pt] w-[100px] h-[80px] border-none overflow-hidden items-center justify-center; }
  .stamp-print-image { @apply max-w-full max-h-full block; object-fit: contain !important; }
  .notes-stamp-container { @apply border border-black relative min-h-[90px] pr-[110px] pt-[2pt] pb-[2pt] pl-[4pt]; }
   .notes-stamp-container ol { @apply text-[8pt] mt-[4pt] pl-[15px]; }
  .note-title-underline, .billing-title-underline { border-bottom: 1pt solid black !important; @apply pb-0 mb-[2pt] inline-block border-black; }
  .address-box p, .billing-address-box p { @apply font-bold text-black text-[8pt]; line-height: 1.1 !important; }
  .address-container .address-box, .address-container .ro-date-client-container { padding: 4pt !important; }
  .ro-date-client-container .field-row label { @apply font-bold text-black text-[9pt] w-auto mr-[4pt] shrink; }
  .ro-date-client-container input { @apply font-bold text-black border-b-[0.5pt] border-black text-[9pt]; }
  #orderDateDisplay { @apply inline font-bold text-black text-[9pt] ml-0 pl-[2pt]; }
  .header-title { @apply bg-black text-white font-bold p-[2pt]; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .header-title h1 { @apply text-[14pt] m-0 font-bold text-white; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }

  /* Additional or overriding styles specifically for PDF rendering */

}

.pdf-generation-mode #printable-area {
  border: 2pt solid black !important;
  box-shadow: none !important;
  margin: 0 !important; /* Ensure no extra margins */
  padding: 10pt !important; /* Consistent padding for PDF */
  width: 100% !important; /* Use full width for canvas capture */
  max-width: 100% !important;
  font-weight: bold !important;
  box-sizing: border-box;
  font-size: 9pt !important; /* Match print font size */
}

.pdf-generation-mode #printable-area * {
   font-weight: bold !important;
   color: black !important;
   border-color: black !important;
    -webkit-print-color-adjust: exact !important; /* Crucial for html2canvas */
    print-color-adjust: exact !important; /* Crucial for html2canvas */
    line-height: 1.2;
}

/* Fix for CardContent padding in PDF mode */
.pdf-generation-mode #printable-area .card-content-pdf-fix {
    padding: 0 !important;
}


.pdf-generation-mode .no-print,
.pdf-generation-mode .popover,
.pdf-generation-mode .popover-content,
.pdf-generation-mode button:not(.print-visible-button) {
  display: none !important;
  visibility: hidden !important;
}

/* Ensure print-only elements ARE visible for PDF */
.pdf-generation-mode .print-only-inline-block,
.pdf-generation-mode .pdf-only-inline-block {
  display: inline-block !important;
  visibility: visible !important;
}
.pdf-generation-mode .print-only-flex,
.pdf-generation-mode .pdf-only-flex {
   display: flex !important;
   visibility: visible !important;
}


/* Input/Textarea Styles for PDF */
.pdf-generation-mode input[type="text"],
.pdf-generation-mode textarea {
  border: none !important; /* Generally remove borders for a cleaner look */
  border-bottom: 0.5pt solid black !important; /* Underline style */
  padding: 0 !important;
  margin: 0 !important;
  background-color: transparent !important;
  box-shadow: none !important;
  font-weight: bold !important;
  color: black !important;
  font-size: 9pt !important;
  white-space: pre-wrap !important;
  overflow-wrap: break-word !important;
  height: auto !important;
  min-height: 1.1em;
  display: block; /* Ensure textareas behave predictably */
  overflow: hidden; /* Hide scrollbars within textareas */
  resize: none !important; /* Disable resize handles */
}
/* Specific overrides for table textareas in PDF */
.pdf-generation-mode .print-table .print-table-cell textarea {
    min-height: 100px !important; /* Explicit height for PDF consistency */
    height: auto !important;
    border: none !important;
    padding: 1pt !important;
    vertical-align: top !important;
    display: block;
    box-sizing: border-box; /* Include padding in height */
    font-size: 8pt !important;
    line-height: 1.1;
}


/* Table Styles for PDF */
.pdf-generation-mode .print-table {
  width: 100% !important;
  border-collapse: collapse !important;
  border: 1pt solid black !important;
}
.pdf-generation-mode .print-table .print-table-header {
    background-color: #f0f0f0 !important; /* Light gray background */
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
}
.pdf-generation-mode .print-table th,
.pdf-generation-mode .print-table td {
  border: 0.5pt solid black !important;
  padding: 2pt !important; /* Minimal padding for PDF */
  vertical-align: top !important;
  font-weight: bold !important;
  color: black !important;
  font-size: 8pt !important;
  box-sizing: border-box;
}
.pdf-generation-mode .print-table tr {
    height: auto !important; /* Consistent row height */
    min-height: 100px !important;
}

/* Matter Box Vertical Text for PDF */
.pdf-generation-mode .vertical-label .matter-text-print {
    writing-mode: vertical-rl !important;
    text-orientation: mixed !important;
    transform: rotate(180deg) !important;
    font-weight: bold !important;
    color: white !important;
    background-color: transparent !important; /* Text itself is transparent */
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    display: block; /* Ensure it takes space */
    white-space: nowrap;
    font-size: 10pt !important;
}
.pdf-generation-mode .vertical-label {
    background-color: black !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    width: 6pt !important; /* Match print */
    padding: 2pt !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}
.pdf-generation-mode .matter-box {
    height: 100px !important; /* Match print */
}
.pdf-generation-mode .matter-content textarea {
   border: none !important;
   padding: 1pt !important;
}


/* Stamp Image for PDF */
.pdf-generation-mode .stamp-container-print {
    display: flex !important;
    visibility: visible !important;
    position: absolute !important;
    top: 2pt !important;
    right: 2pt !important;
    width: 100px !important; /* Match print */
    height: 80px !important; /* Match print */
    border: none !important;
    overflow: hidden !important; /* Important for canvas rendering */
    align-items: center !important;
    justify-content: center !important;
}
.pdf-generation-mode .stamp-print-image {
    max-width: 100% !important;
    max-height: 100% !important;
    object-fit: contain !important;
    display: block !important;
}
/* Ensure the container holding the stamp has a border in PDF */
.pdf-generation-mode .notes-stamp-container {
   border: 1pt solid black !important;
   position: relative !important;
   min-height: 90px !important; /* Match print */
   padding-right: 110px !important; /* Match print */
   padding-top: 2pt !important;
   padding-bottom: 2pt !important;
   padding-left: 4pt !important;
}
.pdf-generation-mode .notes-stamp-container ol {
   font-size: 8pt !important; /* Match print */
   margin-top: 4pt !important;
   padding-left: 15px !important;
}


/* Ensure underlines are visible in PDF */
.pdf-generation-mode .note-title-underline,
.pdf-generation-mode .billing-title-underline {
   border-bottom: 1pt solid black !important; /* Match print */
   padding-bottom: 0px !important;
   margin-bottom: 2pt !important;
   display: inline-block !important;
   border-color: black !important; /* Explicitly set black color */
}

/* General text legibility */
.pdf-generation-mode p,
.pdf-generation-mode li,
.pdf-generation-mode label {
    font-weight: bold !important;
    color: black !important;
    line-height: 1.2 !important; /* Improve readability */
    font-size: 9pt !important; /* Adjust if needed, matches body */
}
.pdf-generation-mode .address-box p,
.pdf-generation-mode .billing-address-box p {
    font-size: 8pt !important; /* Match print */
    line-height: 1.1 !important;
}

/* Hide elements specifically marked to be hidden during PDF generation */
.hidden-for-pdf {
    display: none !important;
    visibility: hidden !important;
}

/* Print Preview Mode */
body.print-preview-mode {
  background-color: #ccc; /* Grey background */
  display: flex;
  justify-content: center;
  align-items: flex-start; /* Align to top */
  padding: 20px;
  min-height: 100vh;
  box-sizing: border-box;
  overflow: auto; /* Allow scrolling if content overflows viewport */
}

body.print-preview-mode > *:not(#printable-area-wrapper):not(#closePreviewButton) {
  display: none !important; /* Hide everything except the preview wrapper and close button */
  visibility: hidden !important;
}


#printable-area-wrapper {
  width: 210mm; /* A4 width */
  /* min-height: 297mm; */ /* Let height be determined by content */
  height: auto;
  background-color: white;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  margin: 20px auto; /* Center the paper */
  position: relative; /* For potential absolute elements inside */
  overflow: visible; /* Allow content to flow naturally if it exceeds A4 bounds */
  box-sizing: border-box;
}

/* Apply print styles within the preview wrapper */
#printable-area-wrapper #printable-area {
  /* Apply print styles defined above - manually apply key styles */
   border: 2pt solid black !important;
   box-shadow: none !important;
   margin: 0 !important;
   padding: 10pt !important; /* Use same padding as PDF/print for consistency */
   width: 100% !important;
   max-width: 100% !important;
   font-weight: bold !important;
   box-sizing: border-box !important;
   font-size: 9pt !important;
}

#printable-area-wrapper #printable-area * {
   font-weight: bold !important;
   color: black !important;
   border-color: black !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    line-height: 1.2;
}

/* Correctly target direct children of CardContent within the wrapper */
#printable-area-wrapper #printable-area .card-content-print-fix {
    padding: 0 !important;
}
#printable-area-wrapper #printable-area .card-content-print-fix > * {
     margin-bottom: 8pt !important;
}
/* Ensure last child has no margin */
#printable-area-wrapper #printable-area .card-content-print-fix > *:last-child {
     margin-bottom: 0 !important;
}


#printable-area-wrapper .no-print,
#printable-area-wrapper .popover,
#printable-area-wrapper .popover-content,
#printable-area-wrapper button:not(.print-visible-button):not(#closePreviewButton) /* Allow close button */
{
  display: none !important;
  visibility: hidden !important;
}

/* Ensure print-only elements ARE visible in preview */
#printable-area-wrapper .print-only-inline-block,
#printable-area-wrapper .pdf-only-inline-block {
  display: inline-block !important;
  visibility: visible !important;
}
#printable-area-wrapper .print-only-flex,
#printable-area-wrapper .pdf-only-flex {
   display: flex !important;
   visibility: visible !important;
}

/* Input/Textarea Styles for Preview */
#printable-area-wrapper input[type="text"],
#printable-area-wrapper textarea {
  border: none !important;
  border-bottom: 0.5pt solid black !important;
  padding: 0 !important;
  margin: 0 !important;
  background-color: transparent !important;
  box-shadow: none !important;
  font-weight: bold !important;
  color: black !important;
  font-size: 9pt !important;
  white-space: pre-wrap !important;
  overflow-wrap: break-word !important;
  height: auto !important;
  min-height: 1.1em;
  display: block !important;
  overflow: hidden !important;
  resize: none !important;
}
#printable-area-wrapper .print-table .print-table-cell textarea {
    min-height: 100px !important; /* Consistent height */
    height: auto !important;
    border: none !important;
    padding: 1pt !important;
    vertical-align: top !important;
    display: block !important;
    box-sizing: border-box !important;
    font-size: 8pt !important;
    line-height: 1.1;
}


/* Table Styles for Preview */
#printable-area-wrapper .print-table {
  width: 100% !important;
  border-collapse: collapse !important;
  border: 1pt solid black !important;
}
#printable-area-wrapper .print-table-header {
    background-color: #f0f0f0 !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
}

#printable-area-wrapper .print-table th,
#printable-area-wrapper .print-table td {
  border: 0.5pt solid black !important;
  padding: 2pt !important;
  vertical-align: top !important;
  font-weight: bold !important;
  color: black !important;
  font-size: 8pt !important;
  box-sizing: border-box !important;
}
#printable-area-wrapper .print-table tr {
    height: auto !important;
    min-height: 100px !important;
}

/* Ensure vertical matter text shows correctly in preview */
#printable-area-wrapper .vertical-label {
   background-color: black !important;
   -webkit-print-color-adjust: exact !important;
   print-color-adjust: exact !important;
   width: 6pt !important;
   padding: 2pt !important;
   display: flex !important;
   align-items: center !important;
   justify-content: center !important;
}
#printable-area-wrapper .vertical-label .matter-text-print {
   writing-mode: vertical-rl !important;
   text-orientation: mixed !important;
   transform: rotate(180deg) !important;
   font-weight: bold !important;
   color: white !important;
   background-color: transparent !important; /* Match PDF */
   -webkit-print-color-adjust: exact !important;
   print-color-adjust: exact !important;
   display: block !important;
   white-space: nowrap !important;
   font-size: 10pt !important;
}
#printable-area-wrapper .matter-box {
    height: 100px !important;
}
#printable-area-wrapper .matter-content textarea {
    border: none !important;
    padding: 1pt !important;
}

/* Stamp Image for Preview */
#printable-area-wrapper .stamp-container-print {
    display: flex !important;
    visibility: visible !important;
    position: absolute !important;
    top: 2pt !important;
    right: 2pt !important;
    width: 100px !important;
    height: 80px !important;
    border: none !important;
    overflow: hidden !important;
    align-items: center !important;
    justify-content: center !important;
}
#printable-area-wrapper .stamp-print-image {
    max-width: 100% !important;
    max-height: 100% !important;
    object-fit: contain !important;
    display: block !important;
}
#printable-area-wrapper .notes-stamp-container {
   border: 1pt solid black !important;
   position: relative !important;
   min-height: 90px !important;
   padding-right: 110px !important;
   padding-top: 2pt !important;
   padding-bottom: 2pt !important;
   padding-left: 4pt !important;
}
#printable-area-wrapper .notes-stamp-container ol {
   font-size: 8pt !important;
   margin-top: 4pt !important;
   padding-left: 15px !important;
}


/* Ensure underlines are visible in Preview */
#printable-area-wrapper .note-title-underline,
#printable-area-wrapper .billing-title-underline {
   border-bottom: 1pt solid black !important;
   padding-bottom: 0px !important;
   margin-bottom: 2pt !important;
   display: inline-block !important;
   border-color: black !important; /* Explicitly set black color */
}

/* General text legibility in Preview */
#printable-area-wrapper p,
#printable-area-wrapper li,
#printable-area-wrapper label {
    font-weight: bold !important;
    color: black !important;
    line-height: 1.2 !important;
    font-size: 9pt !important;
}
#printable-area-wrapper .address-box p,
#printable-area-wrapper .billing-address-box p {
    font-size: 8pt !important;
    line-height: 1.1 !important;
}

/* Style for the close button in preview */
#closePreviewButton {
    position: fixed; /* Position relative to viewport */
    top: 10px;
    right: 10px;
    z-index: 1000; /* Ensure it's above the preview */
    padding: 8px 16px;
    background-color: #dc3545; /* Red */
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    /* Ensure it's visible even when body has specific styles */
    display: block !important;
    visibility: visible !important;
}

#closePreviewButton:hover {
    background-color: #c82333; /* Darker red */
}
